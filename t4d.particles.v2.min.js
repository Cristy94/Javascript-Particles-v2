$("<style type='text/css'>.sparkling{ position:relative;}.particle{ position:absolute;z-index:10;top:0px;left:0px;pointer-events:none;} </style>").appendTo("head");var imgsrc_default="http://piataterenuri.info/t4d/particles/sparks/spark";var spark_types=3;var particle_number=2;var particle_variation=8;var particle_min_size=8;var particle_max_size=32;var accel_div=4;var delay=2;var dir=1;var particle_life=900;var death_rand=35;var last_moved=0,now,last_x=-1,last_y=-1,body=$("body");$(window).load(function(){body=$("body");mWidth=$(window).width();mHeight=$(document).height();$(".sparkling").live("mousemove",function(a){now=(new Date).getTime();if(now-last_moved>delay){if($(this).attr("data-style")!=undefined)setStyle[$(this).attr("data-style")]();else setStyle["reset"]();if($(this).attr("data-src-no")!=undefined)spark_types=$(this).attr("data-src-no");if($(this).attr("data-src")!=undefined)imgsrc=$(this).attr("data-src");else imgsrc=imgsrc_default;if(last_x==-1||now-last_moved>500){last_x=a.pageX;last_y=a.pageY}for(var b=1;b<=particle_number;++b){var c=Math.random();var d=Math.random();body.append('<img class="particle" src="'+imgsrc+(1+Math.round(c*(spark_types-1)))+'.png"'+"/>");var e=$(".particle:last");var f=-dir;if(last_x-a.pageX<0)f=dir;var g=-dir;if(last_y-a.pageY<0)g=dir;f*=Math.abs(Math.floor(last_x-a.pageX))/accel_div;g*=Math.abs(Math.floor(last_y-a.pageY))/accel_div;var h=Math.floor(particle_variation+c*particle_variation);var i=a.pageY-h*(1-Math.round(d));var j=a.pageX-h*(1-Math.round(c));var k=particle_min_size+Math.floor(c*(particle_max_size-particle_min_size));e.css("top",i).css("left",j).css("width",k).css("height",k);randt=i+Math.floor(c*death_rand)*g;randl=j+Math.floor(d*death_rand)*f;e.animate({left:randl,top:randt,height:"toggle",width:"toggle"},{step:function(a,b){if(b.prop=="left"&&a+32>mWidth||b.prop=="top"&&a+32>mHeight){$(b.elem).remove()}},duration:particle_life,complete:function(){$(this).remove()}})}last_moved=now}last_x=a.pageX;last_y=a.pageY})});var setStyle={reset:function(){imgsrc_default="http://piataterenuri.info/t4d/particles/sparks/spark";spark_types=3;particle_number=2;particle_variation=8;particle_min_size=8;particle_max_size=32;accel_div=4;delay=15;dir=1;particle_life=800;death_rand=35},snow:function(){particle_number=2;particle_variation=17;particle_min_size=8;particle_max_size=32;accel_div=8;delay=2;dir=-1;particle_life=1200;death_rand=150},sparks:function(){particle_number=2;particle_variation=1;particle_min_size=14;particle_max_size=24;accel_div=4;delay=2;dir=1;particle_life=800;death_rand=25},science:function(){particle_number=1;particle_variation=1;particle_min_size=14;particle_max_size=24;accel_div=.5;delay=2;dir=1;particle_life=1e3;death_rand=45}}